(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{10:function(e,t,a){e.exports={imageGalleryItem:"ImageGalleryItem_imageGalleryItem__2jbNY",imageGalleryItem__image:"ImageGalleryItem_imageGalleryItem__image__3Wehh"}},11:function(e,t,a){e.exports={error:"Error_error__2eneD",error__name:"Error_error__name__2ohjZ"}},12:function(e,t,a){e.exports={overlay:"Modal_overlay__2hSbT",modal:"Modal_modal__3sGQU"}},14:function(e,t,a){e.exports={imageGallery:"ImageGallery_imageGallery__2bEiF"}},15:function(e,t,a){e.exports={button:"Button_button__810Fb"}},21:function(e,t,a){},22:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n,r=a(1),o=a.n(r),c=a(8),s=a.n(c),i=(a(21),a(3)),l=a(4),u=a(6),m=a(5),h=(a(22),a(7)),d=a.n(h),p=["title","titleId"];function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},g.apply(this,arguments)}function b(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function j(e,t){var a=e.title,o=e.titleId,c=b(e,p);return r.createElement("svg",g({height:32,width:32,xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":o},c),a?r.createElement("title",{id:o},a):null,n||(n=r.createElement("path",{d:"M19.427 20.427a8.5 8.5 0 1 1 1.083-.917l5.998 5.998a.699.699 0 0 1-.008.992.7.7 0 0 1-.992.008l-6.08-6.08ZM14.5 21a7.5 7.5 0 1 0 0-15 7.5 7.5 0 0 0 0 15Z",fill:"#929292",fillRule:"evenodd"})))}var f=r.forwardRef(j),v=(a.p,a(0)),_=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={imageName:""},e.handleChange=function(t){e.setState({imageName:t.currentTarget.value})},e.handleSubmit=function(t){t.preventDefault(),e.props.onSubmit(e.state.imageName),e.reset()},e.reset=function(){e.setState({imageName:""})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.imageName,t=this.handleChange,a=this.handleSubmit;return Object(v.jsx)("header",{className:d.a.searchBar,children:Object(v.jsxs)("form",{className:d.a.searchForm,onSubmit:a,children:[Object(v.jsx)("button",{type:"submit",className:d.a.searchForm__button,children:Object(v.jsx)(f,{})}),Object(v.jsx)("input",{className:d.a.searchForm__input,type:"text",value:e,onChange:t,autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})}}]),a}(r.Component),O=_,y=a(13),x=a(14),w=a.n(x);var S={fetchImage:function(e,t){return fetch("https://pixabay.com/api/?q=".concat(e,"&page=").concat(t,"&per_page=12&key=23195286-789ed49c86d3fd3c443dc5a81&image_type=photo&orientation=horizontal")).then((function(t){return t.ok?t.json():Promise.reject(new Error("\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u0441 \u0438\u043c\u0435\u043d\u0435\u043c ".concat(e," \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e")))}))}},I=a(10),N=a.n(I);var k=function(e){var t=e.webformatURL,a=e.tags,n=e.index;return Object(v.jsx)("li",{className:N.a.imageGalleryItem,children:Object(v.jsx)("img",{src:t,alt:a,className:N.a.imageGalleryItem__image,"data-index":n})})},M=a(15),C=a.n(M);var F=function(e){var t=e.onLoadMore;return Object(v.jsx)("button",{type:"button",onClick:t,className:C.a.button,children:"Load more"})},E=(a(24),a(16)),G=a.n(E);var L=function(){return Object(v.jsx)(G.a,{type:"ThreeDots",color:"#3f51b5",height:80,width:80})},D=a(11),B=a.n(D);var R=function(e){var t=e.name;return Object(v.jsxs)("p",{className:B.a.error,children:["\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u0441 \u0438\u043c\u0435\u043d\u0435\u043c ",Object(v.jsxs)("span",{className:B.a.error__name,children:['"',t,'"']})," \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"]})},U=a(12),A=a.n(U),T=document.querySelector("#modal-root"),P=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleBackdropClick=function(t){t.target===t.currentTarget&&e.props.onClose()},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props.image,t=this.handleBackdropClick;return Object(c.createPortal)(Object(v.jsx)("div",{className:A.a.overlay,onClick:t,children:Object(v.jsx)("div",{className:A.a.modal,children:Object(v.jsx)("img",{src:e.largeImageURL,alt:e.tags})})}),T)}}]),a}(r.Component),Q=P,K=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={images:[],page:1,error:null,status:"idle",showModal:!1,imageIndex:null},e.openModal=function(t){var a=t.target.getAttribute("data-index");e.setState({showModal:!0,imageIndex:a})},e.closeModal=function(){e.setState({showModal:!1,imageIndex:null})},e.loadMore=function(){e.setState((function(e){return{page:e.page+1}}))},e.scroll=function(){setTimeout((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}),1e3)},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this,n=e.name,r=this.props.name,o=t.page,c=this.state.page;n!==r&&(this.setState({status:"pending"}),S.fetchImage(r).then((function(e){return a.setState({images:e.hits,status:"resolved",page:1})})).catch((function(e){return a.setState({error:e,status:"rejected"})}))),o!==c&&c>1&&(this.setState({status:"pending"}),S.fetchImage(r,c).then((function(e){return a.setState({images:[].concat(Object(y.a)(a.state.images),Object(y.a)(e.hits)),status:"resolved"})})).catch((function(e){return a.setState({error:e,status:"rejected"})})),this.scroll())}},{key:"render",value:function(){var e=this.state,t=e.images,a=e.status,n=e.showModal,r=e.imageIndex,o=this.openModal,c=this.closeModal,s=this.loadMore,i=this.props.name;return"idle"===a?Object(v.jsx)(v.Fragment,{}):"pending"===a?Object(v.jsx)(L,{}):"rejected"===a||0===t.length||""===i.trim()?Object(v.jsx)(R,{name:i}):"resolved"===a?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("ul",{className:w.a.imageGallery,onClick:o,children:t.map((function(e,t){var a=e.id,n=e.webformatURL,r=e.tags;return Object(v.jsx)(k,{webformatURL:n,tags:r,index:t},a)}))}),Object(v.jsx)(F,{onLoadMore:s}),n&&Object(v.jsx)(Q,{image:t[r],onClose:c})]}):void 0}}]),a}(r.Component),Z=K,q=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={imageName:""},e.addName=function(t){e.setState({imageName:t})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.imageName,t=this.addName;return Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)(O,{onSubmit:t}),Object(v.jsx)(Z,{name:e})]})}}]),a}(r.Component),z=q;s.a.render(Object(v.jsx)(o.a.StrictMode,{children:Object(v.jsx)(z,{})}),document.getElementById("root"))},7:function(e,t,a){e.exports={searchBar:"Searchbar_searchBar__1mICa",searchForm:"Searchbar_searchForm__3z4eQ",searchForm__button:"Searchbar_searchForm__button__3RQQQ",searchForm__input:"Searchbar_searchForm__input__2ov7y"}}},[[45,1,2]]]);
//# sourceMappingURL=main.69d027c6.chunk.js.map